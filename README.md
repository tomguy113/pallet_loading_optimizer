# 🚛 台灣貨車棧板裝載與成本最佳化計算器

這個專案提供一個簡單而實用的工具，旨在協助物流和運輸規劃人員根據棧板的尺寸、高度、重量及數量，智能計算並推薦最經濟、最符合效益的貨車派車方案。它不僅考量了單台貨車的裝載極限，還能自動計算並建議使用多台同型貨車的整體最佳成本。

# 立即使用
[台灣貨車棧板裝載與成本最佳化計算器](https://tomguy113.github.io/pallet_loading_optimizer/)

## ✨ 功能特色

*   **多棧板類型輸入**：可輸入多組不同尺寸（長x寬）、高度、單個重量及數量的棧板資訊。
*   **靈活的貨車單價設定**：貨車的單次派車價格可由使用者自行在介面中調整，方便根據實際市場變動更新成本模型。
*   **可選配油壓車佔用空間**：
    *   勾選「包含油壓車」選項後，系統會將油壓車 (40 × 68.5 cm) 的固定空間納入計算。
    *   油壓車假定**不可旋轉**，並固定放置在貨車車廂的**最右方（後方）**。
    *   若油壓車尺寸超過車廂可容納的範圍，系統將會提示並排除該車型。
*   **多重約束智能評估**：
    *   **平面裝載**：採用貪婪裝箱演算法，計算每台貨車的 2D 最大裝載數量，並嘗試 90 度旋轉以尋找最佳擺放方式。
    *   **高度限制**：嚴格確保每個棧板的高度不超過車廂的內部高度。
    *   **載重限制**：考慮裝載棧板的總重量，不超過貨車的最大載重能力。
*   **成本最佳化叫車方案**：
    *   對於每種貨車類型（3.49噸、8.8噸、17噸），模擬所需貨車台數才能裝完所有貨物。
    *   根據動態設定的貨車單價，計算不同車型方案的總成本。
    *   自動篩選並推薦**總成本最低**的叫車方案，即便這意味著需要派出多台較小型貨車。
*   **直觀的視覺化棧板配置圖**：
    *   清晰展示每種推薦方案下，**每台貨車的棧板實際配置平面圖**，包括棧板的位置和是否旋轉。
    *   若有油壓車，也會在圖上標示其固定位置。
*   **詳細的結果分析**：提供每種方案的完整資訊，包括：
    *   車廂尺寸 (長 × 寬 × 高)
    *   載重能力
    *   裝載效率
    *   棧板配置 (已裝載數/總數)
    *   總成本
    *   每台車價格
    *   總棧板數
    *   所需車輛數
    *   明確指出不適用方案的原因（如油壓車過大、棧板超高、總重超載、空間不足等）。
*   **單一 HTML 檔案**：程式碼完全包含在一個 HTML 檔案中，易於部署、分享與修改。

## 🚀 快速上手

1.  **輸入棧板資訊**：
    *   在「棧板資訊輸入」區塊中，輸入每個棧板的**長度 (cm)**、**寬度 (cm)**、**高度 (cm)**、**單個重量 (kg)** 和**數量**。
    *   您可以點擊「**+ 新增棧板類型**」來添加更多不同規格的棧板。
    *   使用「快速新增」按鈕可以方便地添加常見棧板尺寸。
    *   點擊棧板旁的「**刪除**」按鈕可移除單個棧板類型。
2.  **配置固定佔用空間 (油壓車)**：
    *   勾選「**包含油壓車**」核選方塊，將預設 40 x 68.5 cm 的油壓車空間計入車廂最右方佔用。
3.  **設定貨車單價**：
    *   在「貨車單價設定」區塊中，可以為不同噸位的貨車修改其**單次派車成本**。預設價格已填寫。
4.  **計算方案**：
    *   點擊「**⚖️ 計算最佳方案**」按鈕，系統將自動分析所有可能的組合。
5.  **查看結果**：
    *   結果區將會顯示「**最經濟叫車方案**」及其詳細分析，包括總成本、所需車輛數和每台車的具體裝載配置圖。
    *   下方會列出「**其他車型方案成本分析**」，展示其他可行方案的成本和裝載情況，以及不適用方案的理由。

## ⚙️ 可配置項 (在程式碼中)

雖然部分配置已可在 UI 中直接修改，但您若需調整貨車本身的尺寸、載重或油壓車的預設參數，請直接編輯 `index.html` 檔案中的 JavaScript 部分：

*   **貨車規格 (`vehicleSpecs`)**：定義了不同噸位貨車的長、寬、高、最大載重。
    ```javascript
    const vehicleSpecs = {
        '3.49噸': { name: '3.49噸中型貨車', length: 340, width: 170, height: 160, maxWeight: 1500 },
        // ... 其他車型
    };
    ```
*   **油壓車空間 (`PALLET_JACK_SPACE`)**：定義了油壓車的實際尺寸（長與寬），以及在圖中旋轉後的顯示。
    ```javascript
    const PALLET_JACK_SPACE = {
        actualLength: 68.5, // 油壓車實際長度
        actualWidth: 40,    // 油壓車實際寬度
        name: "油壓車",
        id: "fixedPalletJack" 
    };
    ```
    **注意**：油壓車在圖形上顯示時，其 `PALLET_JACK_SPACE.actualWidth` 會作為圖上的長度（X軸），`PALLET_JACK_SPACE.actualLength` 會作為圖上的寬度（Y軸），以模擬順時針 90 度旋轉並靠右擺放。
*   **棧板裝箱步長 (`step` in `packPallets`)**：
    `const step = 1;` 目前設為 1cm 的步長以提高精確度。若遇到性能問題，可適度調大（如 5、10）。

## 🧠 核心演算法概述

本工具的核心計算基於以下幾點：

1.  **棧板實例化**：使用者輸入的每種類型的棧板數量，都會被轉換為單獨的棧板實例物件，帶有唯一 ID，便於追蹤其在多輛貨車之間的分配。
2.  **單車容量評估 (`evaluateSingleTruckCapacity`)**：
    *   **高度篩選**：首先排除所有單個高度超出車廂內部高度的棧板。
    *   **2D 裝箱**：對剩餘棧板應用一個簡化的貪婪裝箱演算法 (`packPallets`)。該演算法會從大到小排序棧板，並嘗試將它們放入貨車的可用空間中。同時，它會嘗試棧板的 90 度旋轉以尋找最佳裝載方式。
    *   **重量校驗與移除**：計算實際裝載在該車廂內的棧板總重量。如果超載，系統會從已裝入的棧板中，依據棧板面積由小到大移除棧板，直到總重量符合限制為止。這能最大化在載重限制下裝載的棧板數量。
    *   **固定空間預佔用**：如果勾選油壓車選項，油壓車的尺寸（順時針 90 度後，即 40cm x 68.5cm）將被視為車廂右後方的一個固定不可移動的已佔用矩形。所有棧板都將被放置在油壓車周圍的剩餘空間中。
3.  **多車成本最佳化 (`calculate`)**：
    *   對於每一種貨車類型（3.49噸、8.8噸、17噸），都進行一輪模擬。
    *   模擬過程中，不斷調用 `evaluateSingleTruckCapacity`，每次將**未被裝載的棧板**傳給下一輛同型車，直到所有棧板都被裝載完畢或確認無法裝載。
    *   累積所需貨車數量和總成本。
    *   最終，比較所有車型方案的總成本，推薦最低成本的方案。

## 🚧 未來可增強功能

*   **更先進的 2D/3D 裝箱演算法**：目前的裝箱演算法為基礎貪婪法，效率可能不是絕對最高。可研究如最佳適配 (Best Fit), Guillotine Packing, Shelf Packing 等更複雜演算法，甚至考慮簡化的 3D 裝載（如疊放限制）。
*   **更多固定佔用物體**：除油壓車外，可能還需考慮車輪拱、內部隔板等固定空間。
*   **圖形化介面互動性**：允許使用者拖曳棧板，手動調整佈局。
*   **數據保存/載入**：讓使用者能夠保存或載入常用的棧板列表和配置。
*   **雲端服務整合**：將應用轉化為網頁服務，並增加後端數據處理能力。
*   **國際貨車標準**：納入更多地區的貨車標準尺寸和載重。
*   **更多物流限制**：例如：可裝載貨物的最高高度、某些貨物不能與特定貨物放在同一車輛等。

## 📜 授權

本專案採用 [MIT License](LICENSE) 開源授權。

---
希望這個 `README.md` 檔案能夠幫助您的 GitHub 專案更好地呈現！
